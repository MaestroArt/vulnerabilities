@extends('layouts.app')

@section('content')
    <div class="container">
        <h1>Vulnerabilities list</h1>
        <a href="{{ route('vulnerability.create') }}" class="btn btn-primary">
            Add new
        </a>
        @empty($vulnerabilities)
            No vulnerabilities found, please run <b>php artisan db:seed</b>
        @else
            <div class="row mt-3">
                <div class="col-7">
                    <b>Title</b>
                </div>
                <div class="col-2">
                    <b>Added by</b>
                </div>
                <div class="col-2">
                    <b>Created at</b>
                </div>
                <div class="col-1">
                    <b>Actions</b>
                </div>
            </div>
            @foreach($vulnerabilities as $vulnerability)
                <div class="row rowselected position-relative">
                    <div class="col-7">
                        {{ $vulnerability->name }}
                    </div>
                    <div class="col-2">
                        {{ $vulnerability->user->name ?? '' }}
                    </div>
                    <div class="col-2">
                        {{ $vulnerability->created_at->format('Y-m-d') }}
                    </div>
                    <div class="col-1 actions">
                        <a href="{{ route('vulnerability.edit', $vulnerability->id) }}" class="btn btn-primary">
                            Edit
                        </a>
                    </div>
                    <a href="{{ route('vulnerability.show', $vulnerability->slug) }}" class="stretched-link"></a>
                </div>
            @endforeach
            <div class="row mt-5">
                <div class="col-4"></div>
                <div class="col-4">
                    {{ $vulnerabilities->links() }}
                </div>
                <div class="col-4"></div>
            </div>
        @endempty
    </div>
@endsection
